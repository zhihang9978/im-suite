# ğŸ“± èŠå¤©æœºå™¨äººä½¿ç”¨æŒ‡å— v1.6.0

**åŠŸèƒ½**: é€šè¿‡èŠå¤©ç•Œé¢ä¸æœºå™¨äººäº¤äº’ï¼Œåˆ›å»ºå’Œåˆ é™¤ç”¨æˆ·

---

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

æˆæƒç”¨æˆ·å¯ä»¥é€šè¿‡**å‘é€æ¶ˆæ¯**ç»™æœºå™¨äººæ¥ç®¡ç†ç”¨æˆ·ï¼Œæ— éœ€è°ƒç”¨APIã€‚æœºå™¨äººä¼šè‡ªåŠ¨ï¼š
1. è§£æå‘½ä»¤
2. æ‰§è¡Œæ“ä½œ
3. è¿”å›ç»“æœ

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ­¥éª¤1: è¶…çº§ç®¡ç†å‘˜åˆ›å»ºæœºå™¨äººç”¨æˆ·

é¦–å…ˆéœ€è¦ä¸ºæœºå™¨äººåœ¨ç³»ç»Ÿä¸­åˆ›å»ºä¸€ä¸ªç”¨æˆ·è´¦å·ï¼š

```bash
POST /api/super-admin/bot-users
Authorization: Bearer {super_admin_token}

{
  "bot_id": 1,
  "username": "userbot",
  "nickname": "ç”¨æˆ·ç®¡ç†æœºå™¨äºº",
  "avatar": "https://example.com/bot-avatar.png"
}
```

**å“åº”**ï¼š
```json
{
  "success": true,
  "data": {
    "id": 1,
    "bot_id": 1,
    "user_id": 100,
    "is_active": true
  },
  "message": "æœºå™¨äººç”¨æˆ·åˆ›å»ºæˆåŠŸï¼Œç°åœ¨å¯ä»¥åœ¨èŠå¤©ä¸­ä¸æœºå™¨äººäº¤äº’"
}
```

### æ­¥éª¤2: æˆæƒç”¨æˆ·ä½¿ç”¨æœºå™¨äºº

ç®¡ç†å‘˜æˆæƒç”¨æˆ·å¯ä»¥ä½¿ç”¨æœºå™¨äººï¼š

```bash
POST /api/admin/bot-permissions
Authorization: Bearer {admin_token}

{
  "user_id": 10,
  "bot_id": 1,
  "expires_at": null
}
```

**å“åº”**ï¼š
```json
{
  "success": true,
  "data": {
    "id": 1,
    "user_id": 10,
    "bot_id": 1,
    "is_active": true
  },
  "message": "ç”¨æˆ·æˆæƒæˆåŠŸï¼Œç°åœ¨å¯ä»¥ä½¿ç”¨æœºå™¨äºº"
}
```

### æ­¥éª¤3: ç”¨æˆ·ä¸æœºå™¨äººèŠå¤©

ç”¨æˆ·åœ¨èŠå¤©ç•Œé¢ä¸­ï¼š
1. æœç´¢æœºå™¨äººç”¨æˆ·åï¼š`userbot`
2. å¼€å§‹å¯¹è¯
3. å‘é€å‘½ä»¤

---

## ğŸ’¬ å¯ç”¨å‘½ä»¤

### 1. /help - å¸®åŠ©

æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‘½ä»¤

**ä½¿ç”¨**ï¼š
```
/help
```

**æœºå™¨äººå›å¤**ï¼š
```
ğŸ¤– **æœºå™¨äººå‘½ä»¤å¸®åŠ©**

**ç”¨æˆ·ç®¡ç†å‘½ä»¤ï¼š**

ğŸ“ **/create** - åˆ›å»ºæ–°ç”¨æˆ·
æ ¼å¼: /create phone=æ‰‹æœºå· username=ç”¨æˆ·å password=å¯†ç  [nickname=æ˜µç§°]
ç¤ºä¾‹: /create phone=13800138000 username=testuser password=Pass123! nickname=æµ‹è¯•ç”¨æˆ·

ğŸ—‘ï¸ **/delete** - åˆ é™¤ç”¨æˆ·
æ ¼å¼: /delete user_id=ç”¨æˆ·ID reason=åˆ é™¤åŸå› 
ç¤ºä¾‹: /delete user_id=123 reason=æµ‹è¯•å®Œæˆ

ğŸ“‹ **/list** - æŸ¥çœ‹å·²åˆ›å»ºçš„ç”¨æˆ·
æ ¼å¼: /list [limit=æ•°é‡]
ç¤ºä¾‹: /list limit=10

â„¹ï¸ **/info** - æŸ¥çœ‹ç”¨æˆ·ä¿¡æ¯
æ ¼å¼: /info user_id=ç”¨æˆ·ID
ç¤ºä¾‹: /info user_id=123

â“ **/help** - æ˜¾ç¤ºæ­¤å¸®åŠ©ä¿¡æ¯
```

---

### 2. /create - åˆ›å»ºç”¨æˆ·

åˆ›å»ºæ–°çš„æ™®é€šç”¨æˆ·

**æ ¼å¼**ï¼š
```
/create phone=æ‰‹æœºå· username=ç”¨æˆ·å password=å¯†ç  [nickname=æ˜µç§°]
```

**ç¤ºä¾‹**ï¼š
```
/create phone=13800138000 username=testuser password=Pass123! nickname=æµ‹è¯•ç”¨æˆ·
```

**æœºå™¨äººå›å¤**ï¼š
```
âœ… **ç”¨æˆ·åˆ›å»ºæˆåŠŸï¼**

ğŸ‘¤ **ç”¨æˆ·ä¿¡æ¯ï¼š**
- ID: 123
- ç”¨æˆ·å: testuser
- æ‰‹æœºå·: 13800138000
- æ˜µç§°: æµ‹è¯•ç”¨æˆ·
- è§’è‰²: user
- çŠ¶æ€: æ¿€æ´»
- åˆ›å»ºæ—¶é—´: 2024-12-19 10:30:00

âš ï¸ è¯·å¦¥å–„ä¿ç®¡ç”¨æˆ·çš„ç™»å½•å‡­è¯
```

**é”™è¯¯ç¤ºä¾‹**ï¼š
```
/create phone=138001380 username=test password=123
```

**æœºå™¨äººå›å¤**ï¼š
```
âŒ æ‰‹æœºå·æ ¼å¼é”™è¯¯ï¼Œåº”ä¸º11ä½æ•°å­—ï¼Œä»¥1å¼€å¤´
```

---

### 3. /delete - åˆ é™¤ç”¨æˆ·

åˆ é™¤æœºå™¨äººåˆ›å»ºçš„ç”¨æˆ·

**æ ¼å¼**ï¼š
```
/delete user_id=ç”¨æˆ·ID reason=åˆ é™¤åŸå› 
```

**ç¤ºä¾‹**ï¼š
```
/delete user_id=123 reason=æµ‹è¯•å®Œæˆ
```

**æœºå™¨äººå›å¤**ï¼š
```
âœ… **ç”¨æˆ·åˆ é™¤æˆåŠŸï¼**

ğŸ‘¤ **å·²åˆ é™¤ç”¨æˆ·ï¼š**
- ID: 123
- ç”¨æˆ·å: testuser
- æ‰‹æœºå·: 13800138000
- åˆ é™¤åŸå› : æµ‹è¯•å®Œæˆ
- åˆ é™¤æ—¶é—´: 2024-12-19 10:35:00
```

**é™åˆ¶**ï¼š
- âš ï¸ åªèƒ½åˆ é™¤**æœ¬æœºå™¨äººåˆ›å»º**çš„ç”¨æˆ·
- âš ï¸ ä¸èƒ½åˆ é™¤å…¶ä»–æ–¹å¼åˆ›å»ºçš„ç”¨æˆ·

---

### 4. /list - æŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨

æŸ¥çœ‹æœºå™¨äººåˆ›å»ºçš„æ‰€æœ‰ç”¨æˆ·

**æ ¼å¼**ï¼š
```
/list [limit=æ•°é‡]
```

**ç¤ºä¾‹**ï¼š
```
/list limit=5
```

**æœºå™¨äººå›å¤**ï¼š
```
ğŸ“‹ **ç”¨æˆ·åˆ—è¡¨** (å…± 3 ä¸ª)

1. **testuser1** (ID:101)
   - æ‰‹æœº: 13800138001
   - æ˜µç§°: æµ‹è¯•ç”¨æˆ·1
   - çŠ¶æ€: âœ… æ¿€æ´»
   - åˆ›å»º: 2024-12-19 10:00

2. **testuser2** (ID:102)
   - æ‰‹æœº: 13800138002
   - æ˜µç§°: æµ‹è¯•ç”¨æˆ·2
   - çŠ¶æ€: âœ… æ¿€æ´»
   - åˆ›å»º: 2024-12-19 10:10

3. **testuser3** (ID:103)
   - æ‰‹æœº: 13800138003
   - æ˜µç§°: æµ‹è¯•ç”¨æˆ·3
   - çŠ¶æ€: âœ… æ¿€æ´»
   - åˆ›å»º: 2024-12-19 10:20

ğŸ’¡ ä½¿ç”¨ /info user_id=ID æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
```

---

### 5. /info - æŸ¥çœ‹ç”¨æˆ·è¯¦æƒ…

æŸ¥çœ‹æŒ‡å®šç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯

**æ ¼å¼**ï¼š
```
/info user_id=ç”¨æˆ·ID
```

**ç¤ºä¾‹**ï¼š
```
/info user_id=123
```

**æœºå™¨äººå›å¤**ï¼š
```
â„¹ï¸ **ç”¨æˆ·è¯¦ç»†ä¿¡æ¯**

**åŸºæœ¬ä¿¡æ¯ï¼š**
- ID: 123
- ç”¨æˆ·å: testuser
- æ‰‹æœºå·: 13800138000
- æ˜µç§°: æµ‹è¯•ç”¨æˆ·
- è§’è‰²: user

**çŠ¶æ€ä¿¡æ¯ï¼š**
- è´¦æˆ·çŠ¶æ€: âœ… æ¿€æ´»
- åœ¨çº¿çŠ¶æ€: ğŸŸ¢ åœ¨çº¿
- æœ€ååœ¨çº¿: 2024-12-19 10:30:00

**ç®¡ç†ä¿¡æ¯ï¼š**
- ç”±æœ¬æœºå™¨äººåˆ›å»º: âœ… æ˜¯
- å¯è¢«æœºå™¨äººç®¡ç†: âœ… æ˜¯
- æ³¨å†Œæ—¶é—´: 2024-12-19 09:00:00

**æ“ä½œæç¤ºï¼š**
ğŸ’¡ æ‚¨å¯ä»¥åˆ é™¤æ­¤ç”¨æˆ·: /delete user_id=123 reason=åˆ é™¤åŸå› 
```

---

## ğŸ“± å®Œæ•´ä½¿ç”¨æµç¨‹ç¤ºä¾‹

### åœºæ™¯1: æ‰¹é‡åˆ›å»ºæµ‹è¯•ç”¨æˆ·

```
ç”¨æˆ·: /create phone=13800138001 username=test1 password=Test123! nickname=æµ‹è¯•1
æœºå™¨äºº: âœ… ç”¨æˆ·åˆ›å»ºæˆåŠŸï¼...

ç”¨æˆ·: /create phone=13800138002 username=test2 password=Test123! nickname=æµ‹è¯•2
æœºå™¨äºº: âœ… ç”¨æˆ·åˆ›å»ºæˆåŠŸï¼...

ç”¨æˆ·: /create phone=13800138003 username=test3 password=Test123! nickname=æµ‹è¯•3
æœºå™¨äºº: âœ… ç”¨æˆ·åˆ›å»ºæˆåŠŸï¼...

ç”¨æˆ·: /list
æœºå™¨äºº: ğŸ“‹ ç”¨æˆ·åˆ—è¡¨ (å…± 3 ä¸ª)...
```

### åœºæ™¯2: æŸ¥çœ‹å’Œåˆ é™¤ç”¨æˆ·

```
ç”¨æˆ·: /list limit=5
æœºå™¨äºº: ğŸ“‹ ç”¨æˆ·åˆ—è¡¨ (å…± 3 ä¸ª)...

ç”¨æˆ·: /info user_id=101
æœºå™¨äºº: â„¹ï¸ ç”¨æˆ·è¯¦ç»†ä¿¡æ¯...

ç”¨æˆ·: /delete user_id=101 reason=æµ‹è¯•å®Œæˆ
æœºå™¨äºº: âœ… ç”¨æˆ·åˆ é™¤æˆåŠŸï¼...

ç”¨æˆ·: /list
æœºå™¨äºº: ğŸ“‹ ç”¨æˆ·åˆ—è¡¨ (å…± 2 ä¸ª)...
```

### åœºæ™¯3: æƒé™é™åˆ¶ç¤ºä¾‹

```
# æœªæˆæƒç”¨æˆ·å°è¯•ä½¿ç”¨æœºå™¨äºº
æœªæˆæƒç”¨æˆ·: /help
æœºå™¨äºº: âŒ æ‚¨æ²¡æœ‰æƒé™ä½¿ç”¨æœºå™¨äººåŠŸèƒ½ã€‚è¯·è”ç³»ç®¡ç†å‘˜æˆæƒã€‚

# å°è¯•åˆ é™¤å…¶ä»–ç”¨æˆ·
ç”¨æˆ·: /delete user_id=999 reason=æµ‹è¯•
æœºå™¨äºº: âŒ åˆ é™¤ç”¨æˆ·å¤±è´¥: åªèƒ½åˆ é™¤æœ¬æœºå™¨äººåˆ›å»ºçš„ç”¨æˆ·
```

---

## ğŸ”’ æƒé™å’Œé™åˆ¶

### 1. ä½¿ç”¨æƒé™
- âœ… å¿…é¡»ç”±ç®¡ç†å‘˜**æˆæƒ**æ‰èƒ½ä½¿ç”¨
- âœ… å¯è®¾ç½®**è¿‡æœŸæ—¶é—´**
- âŒ æœªæˆæƒç”¨æˆ·æ— æ³•ä½¿ç”¨ä»»ä½•å‘½ä»¤

### 2. æ“ä½œé™åˆ¶
- âœ… åªèƒ½åˆ›å»º**æ™®é€šç”¨æˆ·**ï¼ˆrole=userï¼‰
- âœ… åªèƒ½åˆ é™¤**æœ¬æœºå™¨äººåˆ›å»º**çš„ç”¨æˆ·
- âŒ ä¸èƒ½åˆ›å»ºç®¡ç†å‘˜
- âŒ ä¸èƒ½åˆ é™¤å…¶ä»–ç”¨æˆ·
- âŒ ä¸èƒ½å°ç¦ç”¨æˆ·

### 3. å‚æ•°éªŒè¯
- âœ… æ‰‹æœºå·å¿…é¡»æ˜¯11ä½ï¼Œä»¥1å¼€å¤´
- âœ… å¯†ç è‡³å°‘6ä½
- âœ… ç”¨æˆ·åå’Œæ‰‹æœºå·å¿…é¡»å”¯ä¸€

---

## ğŸ”§ ç®¡ç†å‘˜åŠŸèƒ½

### æŸ¥çœ‹æœºå™¨äººçš„æˆæƒç”¨æˆ·

```bash
GET /api/super-admin/bot-users/{bot_id}/permissions
Authorization: Bearer {admin_token}
```

### æ’¤é”€ç”¨æˆ·æƒé™

```bash
DELETE /api/admin/bot-permissions/{user_id}/{bot_id}
Authorization: Bearer {admin_token}
```

### ç”¨æˆ·æŸ¥çœ‹è‡ªå·±çš„æƒé™

```bash
GET /api/bot-permissions
Authorization: Bearer {user_token}
```

**å“åº”**ï¼š
```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "user_id": 10,
      "bot_id": 1,
      "bot": {
        "id": 1,
        "name": "ç”¨æˆ·ç®¡ç†æœºå™¨äºº",
        "description": "..."
      },
      "granted_by": 1,
      "granted_by_user": {
        "username": "admin"
      },
      "is_active": true,
      "expires_at": null,
      "created_at": "2024-12-19T10:00:00Z"
    }
  ],
  "total": 1
}
```

---

## ğŸ“Š æ•°æ®åº“è®¾è®¡

### BotUserè¡¨ - æœºå™¨äººç”¨æˆ·å…³è”

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | uint | ä¸»é”® |
| bot_id | uint | æœºå™¨äººID |
| user_id | uint | ç³»ç»Ÿç”¨æˆ·ID |
| is_active | bool | æ˜¯å¦æ¿€æ´» |

### BotUserPermissionè¡¨ - ç”¨æˆ·ä½¿ç”¨æƒé™

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | uint | ä¸»é”® |
| user_id | uint | è¢«æˆæƒç”¨æˆ·ID |
| bot_id | uint | æœºå™¨äººID |
| granted_by | uint | æˆæƒè€…ID |
| is_active | bool | æ˜¯å¦æ¿€æ´» |
| expires_at | timestamp | è¿‡æœŸæ—¶é—´ |

---

## ğŸ›¡ï¸ å®‰å…¨ç‰¹æ€§

### 1. æƒé™æ£€æŸ¥
- æ¯æ¬¡å‘½ä»¤æ‰§è¡Œå‰æ£€æŸ¥ç”¨æˆ·æƒé™
- è¿‡æœŸæƒé™è‡ªåŠ¨å¤±æ•ˆ
- å¯éšæ—¶æ’¤é”€æƒé™

### 2. æ“ä½œå®¡è®¡
- æ‰€æœ‰æ“ä½œè®°å½•åˆ°Botæ—¥å¿—
- åŒ…å«æ“ä½œè€…ã€æ—¶é—´ã€ç»“æœ
- ä¾¿äºè¿½è¸ªå’Œå®¡æŸ¥

### 3. å¼‚æ­¥å¤„ç†
- æ¶ˆæ¯å¤„ç†å¼‚æ­¥æ‰§è¡Œ
- ä¸å½±å“æ­£å¸¸èŠå¤©æ€§èƒ½
- è‡ªåŠ¨é”™è¯¯æ¢å¤

---

## â“ å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•æˆæƒå¤šä¸ªç”¨æˆ·ï¼Ÿ
**A**: ç®¡ç†å‘˜å¯ä»¥æ‰¹é‡æˆæƒï¼š
```bash
# æˆæƒç”¨æˆ·1
POST /api/admin/bot-permissions
{"user_id": 10, "bot_id": 1}

# æˆæƒç”¨æˆ·2
POST /api/admin/bot-permissions
{"user_id": 11, "bot_id": 1}
```

### Q2: æœºå™¨äººä¸å›å¤æ€ä¹ˆåŠï¼Ÿ
**A**: æ£€æŸ¥ï¼š
1. æœºå™¨äººç”¨æˆ·æ˜¯å¦åˆ›å»ºæˆåŠŸ
2. ç”¨æˆ·æ˜¯å¦å·²æˆæƒ
3. æ¶ˆæ¯æ˜¯å¦å‘é€åˆ°æ­£ç¡®çš„æœºå™¨äººè´¦å·

### Q3: å¦‚ä½•æŸ¥çœ‹æœºå™¨äººåˆ›å»ºäº†å¤šå°‘ç”¨æˆ·ï¼Ÿ
**A**: å‘é€ `/list` å‘½ä»¤æŸ¥çœ‹å®Œæ•´åˆ—è¡¨

### Q4: å¯ä»¥è®¾ç½®ä¸´æ—¶æƒé™å—ï¼Ÿ
**A**: å¯ä»¥ï¼Œæˆæƒæ—¶è®¾ç½®è¿‡æœŸæ—¶é—´ï¼š
```json
{
  "user_id": 10,
  "bot_id": 1,
  "expires_at": "2024-12-31T23:59:59Z"
}
```

### Q5: å‘½ä»¤å‚æ•°å¯ä»¥æœ‰ç©ºæ ¼å—ï¼Ÿ
**A**: å½“å‰ç‰ˆæœ¬ä¸æ”¯æŒå‚æ•°å€¼åŒ…å«ç©ºæ ¼ã€‚å¦‚éœ€è®¾ç½®æ˜µç§°ä¸º"æµ‹è¯• ç”¨æˆ·"ï¼Œè¯·ä½¿ç”¨ä¸‹åˆ’çº¿ï¼š`nickname=æµ‹è¯•_ç”¨æˆ·`

---

## ğŸš€ æœªæ¥æ‰©å±•

### è®¡åˆ’ä¸­çš„åŠŸèƒ½

- ğŸ“‹ æ”¯æŒç¾¤èŠä¸­ä½¿ç”¨æœºå™¨äººï¼ˆ@mentionï¼‰
- ğŸ“‹ æ”¯æŒæ‰¹é‡æ“ä½œå‘½ä»¤
- ğŸ“‹ æ”¯æŒå‚æ•°å€¼åŒ…å«ç©ºæ ¼
- ğŸ“‹ æ”¯æŒæ›´å¤šç®¡ç†å‘½ä»¤
- ğŸ“‹ æ”¯æŒè‡ªå®šä¹‰å‘½ä»¤
- ğŸ“‹ æ”¯æŒå‘½ä»¤å†å²æŸ¥è¯¢

---

## ğŸ“ ç‰ˆæœ¬å†å²

### v1.6.0 (2024-12-19)
- âœ¨ æ–°å¢èŠå¤©æœºå™¨äººåŠŸèƒ½
- âœ¨ æ”¯æŒé€šè¿‡èŠå¤©ç•Œé¢åˆ›å»º/åˆ é™¤ç”¨æˆ·
- âœ¨ æ”¯æŒå‘½ä»¤è§£æå’Œæ‰§è¡Œ
- âœ¨ æ”¯æŒç”¨æˆ·æƒé™ç®¡ç†
- âœ¨ æ”¯æŒæ“ä½œå®¡è®¡

---

**æœ€åæ›´æ–°**: 2024-12-19  
**ä½œè€…**: å¿—èˆªå¯†ä¿¡å¼€å‘å›¢é˜Ÿ  
**æ–‡æ¡£ç‰ˆæœ¬**: v1.6.0

