# 志航密信 - 功能指南

**版本**: v1.6.0 - 智能机器人管理版  
**更新日期**: 2024-12-19

---

## 🎯 志航密信能做什么？

志航密信是一个**安全、私密、功能强大**的即时通讯系统，提供企业级的通讯解决方案。

---

## 📱 核心通讯功能

### 💬 即时消息

**文本消息**
- ✅ 发送和接收文字消息
- ✅ 表情符号支持
- ✅ 消息已读回执
- ✅ 正在输入提示

**多媒体消息**
- ✅ 发送图片（支持预览）
- ✅ 发送视频（支持播放）
- ✅ 发送语音消息
- ✅ 发送文件（最大100MB）

**高级消息功能**
- ✅ 消息撤回（2分钟内）
- ✅ 消息编辑（已发送的消息）
- ✅ 消息转发
- ✅ 引用回复
- ✅ 消息置顶
- ✅ 消息标记（重要/收藏）
- ✅ 定时发送
- ✅ 静默消息

---

### 👥 群组聊天

**基础功能**
- ✅ 创建群组（最多10,000人）
- ✅ 邀请成员
- ✅ 群组消息
- ✅ @提及成员
- ✅ 群公告

**管理功能**
- ✅ 设置管理员
- ✅ 成员权限管理
- ✅ 踢出成员
- ✅ 禁言管理
- ✅ 群组设置

**高级功能**
- ✅ 邀请链接（可设置过期）
- ✅ 入群审核
- ✅ 群组统计
- ✅ 审计日志

---

### 📞 语音视频通话

**语音通话**
- ✅ 一对一语音通话
- ✅ 高清音质
- ✅ 低延迟（<300ms）
- ✅ 网络自适应

**视频通话**
- ✅ 一对一视频通话
- ✅ 高清视频
- ✅ 实时传输
- ✅ 摄像头切换

**通话功能**
- ✅ 静音/取消静音
- ✅ 扬声器切换
- ✅ 通话时长显示
- ✅ 通话历史记录

---

### 📁 文件管理

**文件上传**
- ✅ 拖拽上传
- ✅ 批量上传
- ✅ 断点续传
- ✅ 上传进度显示

**文件预览**
- ✅ 图片预览（缩略图+大图）
- ✅ 视频在线播放
- ✅ 音频播放
- ✅ 文档预览（PDF等）

**文件管理**
- ✅ 文件列表
- ✅ 搜索文件
- ✅ 下载文件
- ✅ 删除文件
- ✅ 文件分享

---

## 🔐 安全和隐私

### 🛡️ 账户安全

**双因子认证(2FA)** ⭐ v1.4.0新增
- ✅ TOTP验证（Google/Microsoft Authenticator）
- ✅ 备用码（10个一次性密码）
- ✅ 受信任设备（30天免验证）
- ✅ 二维码扫描启用
- ✅ 验证历史记录

**设备管理** ⭐ v1.4.0新增
- ✅ 查看所有登录设备
- ✅ 设备详情（IP、位置、登录时间）
- ✅ 远程强制下线
- ✅ 可疑设备检测
- ✅ 风险评分（0-100分）
- ✅ 活动历史追踪

**密码安全**
- ✅ 强密码要求
- ✅ 密码加密存储
- ✅ 修改密码
- ✅ 忘记密码恢复

---

### 🔒 消息加密

**端到端加密**
- ✅ 私聊消息自动加密
- ✅ 群聊消息加密
- ✅ 文件传输加密
- ✅ 通话加密

**阅后即焚**
- ✅ 设置消息自毁时间
- ✅ 查看后自动删除
- ✅ 秘密聊天模式

---

## 🤖 智能机器人 ⭐ v1.6.0新增

### 💬 聊天式用户管理

**无需编程，在聊天中直接管理用户！**

#### 可用命令

**1. 查看帮助**
```
发送: /help
获得: 完整的命令列表和使用说明
```

**2. 创建用户**
```
发送: /create phone=13800138001 username=demo1 password=Demo123!

获得: ✅ 用户创建成功！
      ID: 101
      用户名: demo1
      手机号: 13800138001
      ...
```

**3. 查看用户列表**
```
发送: /list

获得: 📋 用户列表 (共 5 个)
      1. demo1 (ID:101)
      2. demo2 (ID:102)
      ...
```

**4. 查看用户详情**
```
发送: /info user_id=101

获得: ℹ️ 用户详细信息
      用户名: demo1
      手机: 13800138001
      状态: 激活
      ...
```

**5. 删除用户**
```
发送: /delete user_id=101 reason=测试完成

获得: ✅ 用户删除成功！
      用户名: demo1
      删除原因: 测试完成
```

---

### 🎯 使用场景

#### 场景1: 快速创建测试账号
```
运维人员在聊天中输入:
/create phone=13800138001 username=test1 password=Test123!

10秒完成！比登录后台快3倍 ⚡
```

#### 场景2: 批量管理用户
```
连续发送多个创建命令:
/create phone=13800138001 username=user1 password=Pass123!
/create phone=13800138002 username=user2 password=Pass123!
/create phone=13800138003 username=user3 password=Pass123!

/list 查看全部
```

#### 场景3: 查看和清理
```
/list                           # 查看所有创建的用户
/info user_id=101              # 查看某个用户详情
/delete user_id=101 reason=测试完成  # 删除不需要的用户
```

---

## 🎨 个性化设置

### 主题和外观

**主题模式**
- ✅ 浅色主题
- ✅ 深色主题
- ✅ 自动切换（跟随系统）

**自定义主题**
- ✅ 自定义颜色
- ✅ 字体大小调节
- ✅ 紧凑/宽松模式

**界面优化**
- ✅ 动画开关
- ✅ 头像显示设置
- ✅ 消息分组
- ✅ 夜间模式（定时）

---

## 👤 个人资料

**基本信息**
- ✅ 修改昵称
- ✅ 设置头像
- ✅ 个人简介
- ✅ 用户名设置

**隐私设置**
- ✅ 在线状态可见性
- ✅ 最后在线时间
- ✅ 头像可见性
- ✅ 群组邀请权限

**通知设置**
- ✅ 消息通知
- ✅ 群组通知
- ✅ 声音提示
- ✅ 免打扰模式

---

## 🔍 搜索功能

**全局搜索**
- ✅ 搜索联系人
- ✅ 搜索群组
- ✅ 搜索消息内容
- ✅ 搜索文件

**高级搜索**
- ✅ 按日期筛选
- ✅ 按类型筛选
- ✅ 按发送者筛选
- ✅ 正则表达式搜索

---

## 📊 平台支持

### 多平台客户端

| 平台 | 支持 | 说明 |
|------|------|------|
| **Web端** | ✅ | 浏览器直接访问，无需安装 |
| **Android** | ✅ | 基于Telegram改造，流畅体验 |
| **iOS** | ⏳ | 计划中 |
| **桌面端** | ⏳ | 计划中（Windows/Mac/Linux） |

**跨平台同步**
- ✅ 消息实时同步
- ✅ 文件云端存储
- ✅ 设置同步
- ✅ 多设备登录

---

## 🎯 角色和权限

### 三种用户角色

#### 👤 普通用户（user）

**可以做**:
- ✅ 发送接收消息
- ✅ 创建群组
- ✅ 上传下载文件
- ✅ 语音视频通话
- ✅ 使用机器人（需授权）⭐
- ✅ 个人设置
- ✅ 2FA设置
- ✅ 设备管理

**不能做**:
- ❌ 访问管理后台
- ❌ 封禁其他用户
- ❌ 查看系统统计
- ❌ 创建机器人

---

#### 👨‍💼 管理员（admin）

**拥有普通用户所有功能，额外可以**:
- ✅ 访问管理后台
- ✅ 审核举报内容
- ✅ 处理违规用户
- ✅ 管理群组权限
- ✅ 授权用户使用机器人 ⭐

**不能做**:
- ❌ 强制用户下线
- ❌ 删除用户账号
- ❌ 查看系统监控
- ❌ 创建机器人

---

#### 👑 超级管理员（super_admin）

**拥有所有权限**:
- ✅ 所有普通用户功能
- ✅ 所有管理员功能
- ✅ 创建和管理机器人 ⭐
- ✅ 强制用户下线
- ✅ 封禁/解封用户
- ✅ 删除用户账号
- ✅ 系统监控
- ✅ 系统配置
- ✅ 查看所有日志

---

## 🤖 机器人功能详解 ⭐ NEW!

### 什么是机器人？

机器人是一个**智能助手**，可以帮助您：
- 🚀 快速创建用户（10秒）
- 📋 查看用户列表
- 🗑️ 删除测试账号
- ℹ️ 查看用户详情

**无需编程，在聊天中发送命令即可！**

---

### 如何使用机器人？

#### 步骤1: 获得授权

管理员授权您使用机器人后，您就可以使用了。

#### 步骤2: 找到机器人

1. 打开聊天应用
2. 在搜索框输入机器人名称（例如: `userbot`）
3. 点击搜索结果

#### 步骤3: 开始对话

发送命令给机器人，例如：

```
您: /help

机器人: 🤖 **机器人命令帮助**

📝 /create - 创建新用户
🗑️ /delete - 删除用户
📋 /list - 查看已创建的用户
ℹ️ /info - 查看用户信息
❓ /help - 显示此帮助信息
```

---

### 实际使用示例

#### 示例1: 创建新用户

```
您输入:
/create phone=13800138001 username=zhangsan password=Zhang123! nickname=张三

机器人回复:
✅ **用户创建成功！**

👤 **用户信息：**
- ID: 101
- 用户名: zhangsan
- 手机号: 13800138001
- 昵称: 张三
- 角色: 普通用户
- 状态: 已激活
- 创建时间: 2024-12-19 15:30:00

⚠️ 请妥善保管用户的登录凭证
```

---

#### 示例2: 查看用户列表

```
您输入:
/list

机器人回复:
📋 **用户列表** (共 3 个)

1. **zhangsan** (ID:101)
   - 手机: 13800138001
   - 昵称: 张三
   - 状态: ✅ 激活
   - 创建: 2024-12-19 15:30

2. **lisi** (ID:102)
   - 手机: 13800138002
   - 昵称: 李四
   - 状态: ✅ 激活
   - 创建: 2024-12-19 15:31

3. **wangwu** (ID:103)
   - 手机: 13800138003
   - 昵称: 王五
   - 状态: ✅ 激活
   - 创建: 2024-12-19 15:32

💡 使用 /info user_id=ID 查看详细信息
```

---

#### 示例3: 查看用户详情

```
您输入:
/info user_id=101

机器人回复:
ℹ️ **用户详细信息**

**基本信息：**
- ID: 101
- 用户名: zhangsan
- 手机号: 13800138001
- 昵称: 张三
- 角色: 普通用户

**状态信息：**
- 账户状态: ✅ 激活
- 在线状态: 🟢 在线
- 最后在线: 2024-12-19 16:00:00

**管理信息：**
- 由本机器人创建: ✅ 是
- 可被机器人管理: ✅ 是
- 注册时间: 2024-12-19 15:30:00

**操作提示：**
💡 您可以删除此用户: /delete user_id=101 reason=删除原因
```

---

#### 示例4: 删除用户

```
您输入:
/delete user_id=101 reason=测试完成，不再需要

机器人回复:
✅ **用户删除成功！**

👤 **已删除用户：**
- ID: 101
- 用户名: zhangsan
- 手机号: 13800138001
- 删除原因: 测试完成，不再需要
- 删除时间: 2024-12-19 16:05:00
```

---

### 🔒 机器人安全限制

**机器人只能**:
- ✅ 创建**普通用户**（不能创建管理员）
- ✅ 删除**自己创建的用户**（不能删除其他用户）
- ✅ 查看**自己创建的用户**

**机器人不能**:
- ❌ 创建管理员账号
- ❌ 删除管理员或其他用户
- ❌ 封禁用户
- ❌ 查看其他人的消息

**权限控制**:
- 🔐 必须由管理员**授权**才能使用
- ⏰ 授权可以设置**过期时间**
- 🚫 管理员可以随时**撤销**权限

---

## 🎨 使用体验

### 界面设计

**现代化UI**
- ✅ 简洁美观
- ✅ 直观易用
- ✅ 响应式设计
- ✅ 流畅动画

**便捷操作**
- ✅ 快捷键支持
- ✅ 拖拽上传
- ✅ 右键菜单
- ✅ 快速操作栏

---

### 性能表现

**速度快**
- ✅ 消息发送 < 100ms
- ✅ 文件上传自动优化
- ✅ 大群组优化加载
- ✅ 流畅不卡顿

**稳定性高**
- ✅ 断线自动重连
- ✅ 消息自动重发
- ✅ 数据本地缓存
- ✅ 容错机制

---

## 📱 实际使用场景

### 场景1: 日常工作沟通

**团队协作**
- 发送工作消息
- 分享文件文档
- 群组讨论
- 语音会议

**效率工具**
- 消息置顶（重要事项）
- 消息标记（待办/完成）
- 定时发送（提醒通知）
- 快速搜索（历史消息）

---

### 场景2: 项目管理

**项目群组**
- 创建项目群组
- 邀请团队成员
- 发布项目公告
- 分享项目文件

**权限管理**
- 设置项目管理员
- 控制成员权限
- 审核新成员入群

---

### 场景3: 测试环境管理 ⭐

**使用机器人快速创建测试账号**

```
测试主管在聊天中:
/create phone=13800138001 username=tester1 password=Test123!
/create phone=13800138002 username=tester2 password=Test123!
/create phone=13800138003 username=tester3 password=Test123!

耗时: 30秒
传统方式: 需要5分钟

效率提升: 10倍 ⚡⚡⚡
```

**测试完成后清理**

```
/list                               # 查看所有测试账号
/delete user_id=101 reason=测试完成
/delete user_id=102 reason=测试完成
/delete user_id=103 reason=测试完成

耗时: 30秒
传统方式: 需要逐个登录后台删除，耗时10分钟
```

---

### 场景4: 客服管理

**为访客快速创建临时账号**

```
客服人员:
客户来访 → 立即创建账号 → 客户开始使用

/create phone=访客手机 username=guest001 password=Temp123!

10秒完成，客户满意度提升 😊
```

---

## 💡 使用技巧

### 技巧1: 快速创建多个用户

连续发送命令，机器人会依次处理：
```
/create phone=13800138001 username=user1 password=Pass123!
/create phone=13800138002 username=user2 password=Pass123!
/create phone=13800138003 username=user3 password=Pass123!
/list
```

---

### 技巧2: 记住常用命令

只需要记住2个核心命令：
- `/help` - 随时查看帮助
- `/list` - 查看已创建的用户

其他命令都可以通过 `/help` 查看

---

### 技巧3: 使用昵称方便识别

创建用户时设置清晰的昵称：
```
/create phone=13800138001 username=test1 password=Test123! nickname=测试账号1号

这样在列表中更容易识别
```

---

## ❓ 常见问题

### Q1: 如何获得使用机器人的权限？

**A**: 联系您的管理员，请他在管理后台为您授权。

管理员操作：管理后台 → 系统管理 → 🔑 用户授权 → 授权您的用户ID

---

### Q2: 机器人不回复怎么办？

**A**: 检查以下几点：
1. 您是否已被授权使用机器人？
2. 搜索的机器人用户名是否正确？
3. 命令格式是否正确？（以`/`开头）

如果都正确，请联系管理员检查机器人状态。

---

### Q3: 我可以创建管理员账号吗？

**A**: 不可以。机器人只能创建**普通用户**（role=user）。

管理员账号必须由超级管理员在后台手动创建。

---

### Q4: 我可以删除任何用户吗？

**A**: 不可以。您只能删除**您自己通过机器人创建的用户**。

这是为了安全，防止误删其他用户。

---

### Q5: 命令参数如何填写？

**A**: 使用 `key=value` 格式，多个参数用空格分隔：

```
正确: /create phone=13800138001 username=test password=Pass123!
错误: /create 13800138001 test Pass123!
```

参数名：
- `phone` - 手机号
- `username` - 用户名
- `password` - 密码
- `nickname` - 昵称（可选）
- `user_id` - 用户ID
- `reason` - 删除原因
- `limit` - 列表数量

---

### Q6: 手机号有什么要求？

**A**: 
- 必须是11位数字
- 以1开头
- 符合中国手机号格式
- 不能重复

示例: `13800138001`, `15900000000`

---

### Q7: 密码有什么要求？

**A**: 
- 至少6位
- 建议包含大小写字母和数字
- 示例: `Pass123!`, `Demo456!`, `Test789!`

---

## 🎊 功能亮点总结

### 🌟 核心亮点

1. **完全私有** 🔒
   - 数据存储在自己的服务器
   - 不依赖第三方
   - 完全可控

2. **安全可靠** 🛡️
   - 端到端加密
   - 双因子认证（2FA）
   - 设备管理
   - 风险检测

3. **功能强大** 💪
   - 143个API端点
   - 26个核心服务
   - 丰富的消息功能
   - 群组管理完善

4. **智能机器人** 🤖 NEW!
   - 聊天式管理
   - 10秒创建用户
   - 无需登录后台
   - 随时随地使用

5. **多平台支持** 📱
   - Web端
   - Android端
   - 跨平台同步

---

## 📊 功能对比

### vs 传统IM系统

| 功能 | 传统系统 | 志航密信 v1.6.0 |
|------|----------|-----------------|
| 数据控制 | ⚠️ 第三方 | ✅ 完全私有 |
| 消息加密 | ⚠️ 部分 | ✅ 端到端 |
| 2FA | ❌ 无 | ✅ 完整支持 |
| 设备管理 | ❌ 无 | ✅ 完整支持 |
| 用户管理 | ⚠️ 仅后台 | ✅ 聊天+后台+API |
| 机器人 | ❌ 无 | ✅ 智能机器人 |
| 部署方式 | 复杂 | ✅ 一键部署 |

---

## 🎯 适合谁使用？

### ✅ 适合的场景

- 🏢 **企业内部通讯** - 数据安全可控
- 🧪 **测试环境** - 快速创建清理账号
- 👥 **小团队协作** - 完整功能，私有部署
- 🔐 **安全要求高** - 金融、医疗等行业
- 📱 **需要定制** - 可以自行修改和扩展

### ⚠️ 不太适合的场景

- 📈 超大规模（百万级用户）- 建议使用云服务
- 🌍 全球分布 - 单服务器延迟高
- 💰 预算有限 - 需要服务器成本

---

## 🚀 开始使用

### 新用户注册

1. 访问Web端地址
2. 点击"注册"
3. 填写：
   - 手机号
   - 用户名
   - 密码
4. 注册成功，开始使用

### 登录

1. 输入用户名和密码
2. （如果启用2FA）输入验证码
3. 登录成功

### 第一次使用

1. 完善个人资料（昵称、头像）
2. 添加联系人或加入群组
3. 开始聊天！

### 使用机器人（如果已授权）

1. 搜索机器人用户名
2. 开始对话
3. 发送 `/help` 查看命令
4. 开始管理用户

---

## 📞 获取帮助

### 应用内帮助

- 点击右上角"帮助"图标
- 查看使用指南
- 查看FAQ

### 联系管理员

- 应用内联系管理员
- 报告问题
- 提出建议

### 文档资源

- 使用指南: `docs/user-guide/`
- 常见问题: `docs/FAQ.md`
- 视频教程: （计划中）

---

## 🎉 总结

### 志航密信v1.6.0为您提供

✅ **强大的通讯功能** - 消息、文件、语音、视频  
✅ **企业级安全** - 加密、2FA、设备管理  
✅ **智能机器人** - 聊天式用户管理，效率提升10倍  
✅ **灵活的权限** - 三级角色，细粒度控制  
✅ **完全私有** - 数据完全掌控  

### 特别适合

- 👔 企业内部通讯
- 🧪 开发测试团队
- 🔐 安全要求高的场景
- 🎯 需要定制化的团队

---

## 📱 立即体验

**Web端**: http://your-server-ip  
**管理后台**: http://your-server-ip:8081

**默认测试账号**:
- 用户名: testuser
- 密码: Test123!

---

**开始您的安全通讯之旅！** 🚀

---

**版本**: v1.6.0  
**更新日期**: 2024-12-19  
**文档类型**: 用户功能指南

